<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProFolio - Find Talents</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Select2 for better multi-select experience -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="freelancer.css">
  <style>
    /* Modal scrolling fix */
    .modal-dialog {
      max-height: 90vh;
    }
    
    .modal-content {
      max-height: 90vh;
    }
    
    .modal-body {
      overflow-y: auto;
      max-height: calc(90vh - 120px); /* Adjust for header and footer */
    }
    
    /* Additional styling for better mobile experience */
    @media (max-width: 768px) {
      .modal-body {
        max-height: calc(90vh - 130px);
      }
    }
  </style>
</head>
<body>
  <!-- Layout Container -->
  <div class="dashboard-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <span class="logo-icon"><i class="fas fa-briefcase"></i></span>
          <span class="logo-text">Pro<span class="accent">Folio</span></span>
        </div>
      </div>
      
      <div class="sidebar-user">
        <div class="user-avatar" id="sidebar-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="user-info">
          <a href="clientProfile.html" class="user-name-link">
            <h6 class="user-name" id="sidebar-name">Aran Joshua</h6>
            <div class="user-role" id="sidebar-role">Client</div>
          </a>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="clientDashboard.html" class="nav-link">
              <i class="fas fa-th-large"></i> Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a href="clientTalents.html" class="nav-link active">
              <i class="fas fa-users"></i> Find Talents
            </a>
          </li>
          <li class="nav-item">
            <a href="clientOffers.html" class="nav-link">
              <i class="fas fa-paper-plane"></i> Sent Offers
            </a>
          </li>
        </ul>
      </nav>
      
      <div class="sidebar-footer">
        <a href="clientLogout.html" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </div>
    </aside>
    
    <main class="main-content">
      <div class="page-content">
        <!-- Page Header -->
        <header class="page-header">
          <div>
            <h2 class="page-title">Find Talents</h2>
            <p class="page-subtitle">Discover talented professionals through their portfolios</p>
          </div>
          <div class="date-display">
            <i class="far fa-calendar-alt"></i>
            <span id="current-date"></span>
          </div>
        </header>
        
        <!-- Search & Filter Section -->
        <div class="search-filter-container">
          <div class="card">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-8">
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                    <input type="text" class="form-control" placeholder="Search for talents by name or expertise..." id="talent-search">
                  </div>
                </div>
                <div class="col-md-4">
                  <select class="form-select" id="category-filter">
                    <option value="">All Categories</option>
                    <option value="design">Design</option>
                    <option value="development">Development</option>
                    <option value="marketing">Marketing</option>
                    <option value="writing">Writing</option>
                    <option value="video">Video & Animation</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Talents Grid -->
        <div class="talents-container mt-4">
          <div class="row g-4" id="talents-grid">
            <!-- Talent cards will be dynamically inserted here by JavaScript -->
          </div>
        </div>
        
        <!-- Portfolio Modal -->
        <div class="modal fade" id="portfolioModal" tabindex="-1" aria-labelledby="portfolioModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header portfolio-modal-header">
                <h5 class="modal-title" id="portfolioModalLabel">Talent Portfolio</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="portfolio-modal-content">
                  <!-- Talent Profile Header -->
                  <div class="talent-profile-header mb-4">
                    <div class="talent-profile-avatar">
                      <img src="/api/placeholder/150/150" alt="Talent" id="modal-talent-avatar">
                    </div>
                    <div class="talent-profile-details">
                      <h4 id="modal-talent-name">Talent Name</h4>
                      <p class="talent-title" id="modal-talent-title">Profession</p>
                      <p class="talent-bio" id="modal-talent-bio">
                        Passionate professional with extensive experience delivering high-quality solutions for clients worldwide.
                      </p>
                    </div>
                  </div>
                  
                  <!-- Skills Section -->
                  <div class="portfolio-section card mb-4">
                    <div class="card-body">
                      <h5 class="mb-3">Skills</h5>
                      <div id="view-portfolio-skills" class="d-flex flex-wrap gap-2">
                        <!-- Skills tags will be dynamically inserted here -->
                      </div>
                    </div>
                  </div>
                  
                  <!-- Work Experience Section -->
                  <div class="portfolio-section card mb-4">
                    <div class="card-header bg-light">
                      <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Work Experience</h5>
                    </div>
                    <div class="card-body">
                      <div id="view-portfolio-experiences">
                        <!-- Work experience items will be dynamically inserted here -->
                      </div>
                    </div>
                  </div>
                  
                  <!-- Work Samples Section -->
                  <div class="portfolio-section card">
                    <div class="card-header bg-light">
                      <h5 class="mb-0"><i class="fas fa-cubes me-2"></i>Work Samples</h5>
                    </div>
                    <div class="card-body">
                      <div id="view-portfolio-samples" class="row">
                        <!-- Work samples will be dynamically inserted here -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="modal-send-offer-btn">Hire Me</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Send Offer Modal -->
        <div class="modal fade" id="sendOfferModal" tabindex="-1" aria-labelledby="sendOfferModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="sendOfferModalLabel">Send Offer to <span id="offer-talent-name">Talent Name</span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="offer-form">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="job-title" class="form-label">Job Title</label>
                      <input type="text" class="form-control" id="job-title" placeholder="e.g., Website Development" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="project-type" class="form-label">Project Type</label>
                      <select class="form-select" id="project-type" required>
                        <option value="">Select project type...</option>
                        <option value="fixed">Fixed-price contract</option>
                        <option value="hourly">Hourly contract</option>
                        <option value="milestone">Milestone-based payment</option>
                        <option value="retainer">Monthly retainer</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <label for="project-overview" class="form-label">Project Overview</label>
                    <textarea class="form-control" id="project-overview" rows="3" placeholder="Brief description of your project and goals" required></textarea>
                  </div>
                  
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="rate" class="form-label">Rate (USD)</label>
                      <div class="input-group">
                        <span class="input-group-text">$</span>
                        <input type="number" class="form-control" id="rate" min="1" placeholder="Enter amount" required>
                        <span class="input-group-text" id="rate-type">Total</span>
                      </div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="deadline" class="form-label">Deadline</label>
                      <input type="date" class="form-control" id="deadline" required>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <label for="required-skills" class="form-label">Required Skills</label>
                    <input type="text" class="form-control" id="skills-input" placeholder="Type skills and press Enter (e.g. JavaScript, React)">
                    <div id="skills-tags" class="d-flex flex-wrap gap-2 mt-2">
                      <!-- Skills tags will be dynamically inserted here -->
                    </div>
                    <input type="hidden" id="required-skills" name="required-skills" required>
                  </div>
                  
                  <div class="mb-3">
                    <label for="client-message" class="form-label">Message to Freelancer</label>
                    <textarea class="form-control" id="client-message" rows="3" placeholder="Additional details, expectations, or questions" required></textarea>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="submit-offer-btn">Send Offer</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Dashboard Footer -->
        <footer class="dashboard-footer">
          <p>ProFolio helps you showcase your work and connect with clients worldwide. Keep your portfolio updated to maximize opportunities.</p>
          <div class="footer-links">
            <a href="#">Terms of Service and Privacy Policy</a>
          </div>
        </footer>
      </div>
    </main>
  </div>
  
  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery (required for Select2) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Client Talents JS -->
  <script src="clientTalents.js"></script>
  
<!-- Script to load profile data -->
<script>
  // Load user profile data from localStorage when page loads
  document.addEventListener('DOMContentLoaded', function() {
    // Try to load user profile data
    const profileData = localStorage.getItem('profileData');
    const storedPhoto = localStorage.getItem('profilePhoto');
    
    if (profileData) {
      const userData = JSON.parse(profileData);
      
      // Update sidebar name if available
      if (userData.fullName) {
        document.getElementById('sidebar-name').textContent = userData.fullName;
      }
      
      // Update sidebar role/company if available
      if (userData.company && userData.company.trim() !== '') {
        document.getElementById('sidebar-role').textContent = userData.company;
      } else {
        document.getElementById('sidebar-role').textContent = 'Client';
      }
    }
    
    // Update avatar if a photo URL is stored
    if (storedPhoto) {
      const avatarElement = document.getElementById('sidebar-avatar');
      avatarElement.innerHTML = ''; // Clear default icon
      
      const avatarImg = document.createElement('img');
      avatarImg.src = storedPhoto;
      avatarImg.alt = 'User Avatar';
      avatarImg.style.width = '100%';
      avatarImg.style.height = '100%';
      avatarImg.style.objectFit = 'cover';
      avatarImg.style.borderRadius = '50%';
      
      avatarElement.appendChild(avatarImg);
    }
    
    // Listen for profile updates
    window.addEventListener('storage', function(event) {
      if (event.key === 'profileData' && event.newValue) {
        const updatedProfile = JSON.parse(event.newValue);
        
        // Update sidebar information
        document.getElementById('sidebar-name').textContent = updatedProfile.fullName || 'Aran Joshua';
        document.getElementById('sidebar-role').textContent = updatedProfile.company && updatedProfile.company.trim() !== '' ? 
          updatedProfile.company : 'Client';
      }
      
      if (event.key === 'profilePhoto' && event.newValue) {
        // Update avatar image
        const avatarElement = document.getElementById('sidebar-avatar');
        if (avatarElement.querySelector('img')) {
          avatarElement.querySelector('img').src = event.newValue;
        } else {
          avatarElement.innerHTML = ''; // Clear default icon
          const avatarImg = document.createElement('img');
          avatarImg.src = event.newValue;
          avatarImg.alt = 'User Avatar';
          avatarImg.style.width = '100%';
          avatarImg.style.height = '100%';
          avatarImg.style.objectFit = 'cover';
          avatarImg.style.borderRadius = '50%';
          avatarElement.appendChild(avatarImg);
        }
      }
    });
  });
</script>
</body>
</html>